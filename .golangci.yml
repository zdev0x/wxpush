linters:
  enable:
    - gofmt
    - govet
    - revive
    - gosec
    - unconvert
    - goconst
    - gocyclo
    - goimports
    - misspell
    - lll
    - prealloc

linters-settings:
  gocyclo:
    min-complexity: 15
  lll:
    line-length: 120
  goconst:
    min-len: 3
    min-occurrences: 3
  gosec:
    excludes:
      - G505 # 忽略 SHA-1 检查（如果微信 API 要求使用 SHA-1）

issues:
  exclude-rules:
    - path: _test\.go
      linters:
        - gocyclo
        - lll
        - goconst
    - path: internal/service/wechat/token.go
      linters:
        - gosec
      text: "G505" # 针对 token.go 的 SHA-1 忽略（可选，视情况选择全局或局部忽略）
    - path: internal/service/wechat/.+\.go
      linters:
        - gosec
      text: "G107" # 忽略微信服务中的变量 URL 检查（仅在确认安全时使用）
  exclude-dirs:
    - vendor/

run:
  deadline: 5m
  tests: true

output:
  format: colored-line-number # 修复输出格式警告
